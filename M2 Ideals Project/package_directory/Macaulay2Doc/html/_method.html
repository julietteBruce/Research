<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1 plus MathML 2.0 plus SVG 1.1//EN" "http://www.w3.org/2002/04/xhtml-math-svg/xhtml-math-svg.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
  <head>
    <title>method -- make a new method function</title>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <link type="text/css" rel="stylesheet" href="../../../../Macaulay2/Style/doc.css"/>

    <link rel="stylesheet" href="../../../../Macaulay2/Style/katex/katex.min.css" />
    <script defer="defer" type="text/javascript" src="../../../../Macaulay2/Style/katex/katex.min.js"></script>
    <script defer="defer" type="text/javascript" src="../../../../Macaulay2/Style/katex/contrib/auto-render.min.js"></script>
    <script defer="defer" type="text/javascript">
      var macros = {
          "\\break": "\\\\",
          "\\ZZ": "\\mathbb{Z}",
          "\\NN": "\\mathbb{N}",
          "\\QQ": "\\mathbb{Q}",
          "\\RR": "\\mathbb{R}",
          "\\CC": "\\mathbb{C}",
          "\\PP": "\\mathbb{P}"
      }, delimiters = [
          { left: "$$",  right: "$$",  display: true},
          { left: "\\[", right: "\\]", display: true},
          { left: "$",   right: "$",   display: false},
          { left: "\\(", right: "\\)", display: false}
      ], ignoredTags = ["tt", "script", "noscript", "style", "textarea", "pre", "code", "option"];
      document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, { delimiters: delimiters, macros: macros, ignoredTags: ignoredTags, trust: true });
      });
    </script>
    <style type="text/css">.katex { font-size: 1em; }</style>
    <link href="../../../../Macaulay2/Style/katex/contrib/copy-tex.min.css" rel="stylesheet" type="text/css" />
    <script defer="defer" type="text/javascript" src="../../../../Macaulay2/Style/katex/contrib/copy-tex.min.js"></script>
    <script defer="defer" type="text/javascript" src="../../../../Macaulay2/Style/katex/contrib/render-a11y-string.min.js"></script>
    <script type="text/javascript" src="../../../../Macaulay2/Style/highlight.js"></script>
  </head>
  <body>
    <table class="buttons">
      <tr>
<td>          <div>
next | previous | <a href="_specifying_sptypical_spvalues.html">forward</a> | <a href="_making_spa_spnew_spmethod_spfunction.html">backward</a> | <a href="_making_spa_spnew_spmethod_spfunction.html">up</a> | <a href="index.html">top</a> | <a href="master.html">index</a> | <a href="toc.html">toc</a> | <a href="http://macaulay2.com/">Macaulay2 website</a>          </div>
</td>      </tr>
    </table>
    <div>
<a title="Macaulay2 documentation" href="index.html">Macaulay2Doc</a> > <a href="___The_sp__Macaulay2_splanguage.html">The Macaulay2 language</a> > <a href="_making_spa_spnew_spmethod_spfunction.html">making a new method function</a> > <a title="make a new method function" href="_method.html">method</a>    </div>
    <hr/>
    <div>
      <h1>method -- make a new method function</h1>
      <div>
        <h2>Synopsis</h2>
        <ul>
          <li>
            <dl class="element">
              <dt>Usage: </dt>
              <dd><code class="language-macaulay2">f = method()</code></dd>
            </dl>
          </li>
          <li>
<a href="_using_spfunctions_spwith_spoptional_spinputs.html">Optional inputs</a>:            <ul>
              <li>
<span><tt>TypicalValue</tt><tt> => </tt><span>a <a title="the class of all types" href="___Type.html">type</a></span>, <span>default value Thing</span>, the type of the value returned by <tt>f</tt>, typically.  This information is used only to build documentation automatically, and is stored in the hash table <a title="types of values returned by functions" href="_typical__Values.html">typicalValues</a>.</span>              </li>
              <li>
<span><tt>Options</tt><tt> => </tt><span>a <a title="the class of all lists -- {...}" href="___List.html">list</a></span>, <span>default value null</span>, a list of options <tt>J => v</tt>, where <tt>J</tt> is the name of an optional argument for <tt>f</tt>, and <tt>v</tt> is its default value. The list of options could be also replaced by the corresponding <a title="the class of hash tables for optional arguments" href="___Option__Table.html">OptionTable</a>. Specifying <tt>true</tt> here indicates that option handling is done by the individual methods, while still allowing dispatching to methods based on types of arguments to be done. The individual methods may have various sets of acceptable option names, possibly empty. See <a href="_making_spnew_spfunctions_spwith_spoptional_sparguments.html">making new functions with optional arguments</a>.</span>              </li>
              <li>
<span><tt>Binary</tt><tt> => </tt><span>a <a title="the class of Boolean values" href="___Boolean.html">Boolean value</a></span>, <span>default value false</span>, whether the method is to be binary: for three arguments or more the result will be computed by calling binary methods installed for <tt>f</tt> with two arguments at a time.</span>              </li>
              <li>
<span><tt>Dispatch</tt><tt> => </tt><tt>...</tt>, <span>default value {Thing, Thing, Thing, Thing}</span>, the method for getting a list of types from the parameters; the value of this option should be <a title="the class of all things" href="___Thing.html">Thing</a> or <a title="the class of all types" href="___Type.html">Type</a> to indicate that a sequence should be regarded as a single argument, or, if the elements of a sequence are to be regarded as separate parameters, a list whose elements are <a title="the class of all things" href="___Thing.html">Thing</a> or <a title="the class of all types" href="___Type.html">Type</a>.  Parameters corresponding to <a title="the class of all things" href="___Thing.html">Thing</a> or to a position beyond the end of the list are dispatched according to their <a title="class of an object" href="_class.html">class</a>, whereas parameters corresponding to <a title="the class of all types" href="___Type.html">Type</a> are expected to be types (actually, hash tables) and are used directly in the search for methods; see <a href="_inheritance.html">inheritance</a>.</span>              </li>
            </ul>
          </li>
          <li>
Outputs:            <ul>
              <li>
<span><tt>f</tt>, a new method function, <span>a <a title="a type of method function" href="___Method__Function.html">method function</a></span>, <span>a <a title="a type of method function" href="___Method__Function__Single.html">method function with a single argument</a></span>, <span>an <a title="a type of method function" href="___Method__Function__Binary.html">associative binary method function</a></span>, or <span>a <a title="a type of method function" href="___Method__Function__With__Options.html">method function with options</a></span></span>              </li>
            </ul>
          </li>
        </ul>
      </div>
      <div>
        <h2>Description</h2>
<span>The code above creates a method function that takes up to four arguments, looking up the appropriate method according to the classes of the arguments, with inheritance.  To install a method for two arguments, (x,y), of classes X and Y, use code like this:</span>        <pre>     f(X,Y) := (x,y) -> ...</pre>
<span>where '...' represents the body of the function you wish to install. The syntax for one or three arguments is analogous.  See <a title="assignment of method or new local variable" href="__co_eq.html">:=</a> for details.</span>        <table class="examples">
          <tr>
<td>              <pre><code class="language-macaulay2">i1 : f = method()

o1 = f

o1 : MethodFunction</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i2 : f ZZ := x -> -x;</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i3 : f(ZZ,String) := (n,s) -> concatenate(n:s);</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i4 : f(String,ZZ,String) := (s,n,t) -> concatenate(s,&quot; : &quot;,toString n,&quot; : &quot;,t);</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i5 : f 44

o5 = -44</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i6 : f(5,&quot;abcd &quot;)

o6 = abcd abcd abcd abcd abcd </code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i7 : f(&quot;foo&quot;,88,&quot;bar&quot;)

o7 = foo : 88 : bar</code></pre>
</td>          </tr>
        </table>
        <p>In the following example we install a asymmetric method to illustrate the left-associative order of evaluation for a <em>binary</em> method function.</p>
        <table class="examples">
          <tr>
<td>              <pre><code class="language-macaulay2">i8 : p = method(Binary => true, TypicalValue => List)

o8 = p

o8 : MethodFunctionBinary</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i9 : p(ZZ,ZZ) := p(List,ZZ) := (i,j) -> {i,j}

o9 = -*Function[stdio:9:33-9:39]*-

o9 : FunctionClosure</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i10 : p(1,2)

o10 = {1, 2}

o10 : List</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i11 : p(1,2,3,4,5,6)

o11 = {{{{{1, 2}, 3}, 4}, 5}, 6}

o11 : List</code></pre>
</td>          </tr>
        </table>
By default, at most four arguments (in a sequence) can be handled by a method function, and the types have to be considered separately when installing methods. In this example, we define a method function that treats a sequence as a single argument, and we install a method for handling such arguments.        <table class="examples">
          <tr>
<td>              <pre><code class="language-macaulay2">i12 : g = method(Dispatch => Thing);</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i13 : g ZZ := i -> -i;</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i14 : g Sequence := S -> reverse S;</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i15 : g 44

o15 = -44</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i16 : g(3,4,5,6)

o16 = (6, 5, 4, 3)

o16 : Sequence</code></pre>
</td>          </tr>
        </table>
Here we define a method whose first argument is to be a type.  It will convert its second argument to that type.        <table class="examples">
          <tr>
<td>              <pre><code class="language-macaulay2">i17 : h = method(Dispatch => {Type})

o17 = h

o17 : MethodFunction</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i18 : h(QQ,ZZ) := (QQ,n) -> n/1;</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i19 : h(RR,ZZ) := (RR,n) -> n + 0.;</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i20 : h(ZZ,ZZ) := (ZZ,n) -> n;</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i21 : h(ZZ,14)

o21 = 14</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i22 : h(QQ,14)

o22 = 14

o22 : QQ</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i23 : h(RR,14)

o23 = 14

o23 : RR (of precision 53)</code></pre>
</td>          </tr>
        </table>
        <p>In the next example we make a linear function of a single real variable whose coefficients are provided as optional arguments named Slope and Intercept, with default value 1.</p>
        <table class="examples">
          <tr>
<td>              <pre><code class="language-macaulay2">i24 : r = method(Options => {Slope => 1, Intercept => 1})

o24 = r

o24 : MethodFunctionWithOptions</code></pre>
</td>          </tr>
        </table>
        <p>The methods installed for this method function should be written in the form <tt>opts -> args -> (...)</tt>.  The argument <tt>opts</tt> will be assigned a hash table of type <a title="the class of hash tables for optional arguments" href="___Option__Table.html">OptionTable</a> containing the optional argument names and their current values.  For example, in the body of the function, the current value for the argument named <tt>b</tt> can be recovered with <tt>opts#b</tt>, or with <tt>opts.b</tt>, in case <tt>b</tt> is known to be a global symbol.  Be careful not to change the value of <tt>b</tt>, or the code will stop working; it would be a good idea to protect it.</p>
        <table class="examples">
          <tr>
<td>              <pre><code class="language-macaulay2">i25 : r RR := o -> x -> o.Slope * x + o.Intercept

o25 = -*Function[stdio:25:11-25:35]*-

o25 : FunctionClosure</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i26 : r(5.)

o26 = 6

o26 : RR (of precision 53)</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i27 : r(5.,Slope=>100)

o27 = 501

o27 : RR (of precision 53)</code></pre>
</td>          </tr>
        </table>
        <p>The default <a title="the class of hash tables for optional arguments" href="___Option__Table.html">option table</a> for <tt>r</tt> can be recovered with the function <a title="get options" href="_options.html">options</a>.  The options given to <a title="make a new method function" href="_method.html">method</a> can be recovered with <a title="recover the options used when a method function was created" href="_method__Options_lp__Function_rp.html">methodOptions</a>.</p>
        <table class="examples">
          <tr>
<td>              <pre><code class="language-macaulay2">i28 : options r

o28 = OptionTable{Intercept => 1}
                  Slope => 1

o28 : OptionTable</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i29 : methodOptions r

o29 = OptionTable{Binary => false                         }
                  Dispatch => {Thing, Thing, Thing, Thing}
                  Options => {Slope => 1, Intercept => 1}
                  TypicalValue => Thing

o29 : OptionTable</code></pre>
</td>          </tr>
        </table>
        <p>In the next example we define a method function that leaves option processing to the individual methods.</p>
        <table class="examples">
          <tr>
<td>              <pre><code class="language-macaulay2">i30 : s = method(Options => true)

o30 = s

o30 : MethodFunctionWithOptions</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i31 : s ZZ := { Slope => 17 } >> o -> x -> o.Slope * x

o31 = -*Function[../../macaulay2-20230205-25510-hsiem6/M2-release-1.21/M2/Macaulay2/m2/option.m2:15:20-17:34]*-

o31 : FunctionClosure</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i32 : s RR := { Intercept => 11 } >> o -> x -> x + o.Intercept

o32 = -*Function[../../macaulay2-20230205-25510-hsiem6/M2-release-1.21/M2/Macaulay2/m2/option.m2:15:20-17:34]*-

o32 : FunctionClosure</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i33 : s 100

o33 = 1700</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i34 : s 1000.

o34 = 1011

o34 : RR (of precision 53)</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i35 : options s</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i36 : options(s,ZZ)

o36 = OptionTable{Slope => 17}

o36 : OptionTable</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i37 : options(s,RR)

o37 = OptionTable{Intercept => 11}

o37 : OptionTable</code></pre>
</td>          </tr>
        </table>
        <p>For now, one installs a method function for <tt>s</tt> with no non-optional arguments using <a title="install methods" href="_install__Method.html">installMethod</a>:</p>
        <table class="examples">
          <tr>
<td>              <pre><code class="language-macaulay2">i38 : installMethod(s,{ Slope => 1234 } >> o -> () -> o.Slope)

o38 = -*Function[../../macaulay2-20230205-25510-hsiem6/M2-release-1.21/M2/Macaulay2/m2/option.m2:15:20-17:34]*-

o38 : FunctionClosure</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i39 : s()

o39 = 1234</code></pre>
</td>          </tr>
          <tr>
<td>              <pre><code class="language-macaulay2">i40 : s(Slope => 4)

o40 = 4</code></pre>
</td>          </tr>
        </table>
      </div>
      <div class="waystouse">
        <h2>For the programmer</h2>
        <p>The object <a title="make a new method function" href="_method.html">method</a> is <span>a <a title="the class of all function closures" href="___Function__Closure.html">function closure</a></span>.</p>
      </div>
      <div>
        <h3>Menu</h3>
        <ul>
          <li>
<span><a href="_specifying_sptypical_spvalues.html">specifying typical values</a></span>          </li>
        </ul>
        <h4>:Types of method functions</h4>
        <ul>
          <li>
<span><a title="a type of method function" href="___Method__Function.html">MethodFunction</a> -- a type of method function</span>          </li>
          <li>
<span><a title="a type of method function" href="___Method__Function__Single.html">MethodFunctionSingle</a> -- a type of method function</span>          </li>
          <li>
<span><a title="a type of method function" href="___Method__Function__Binary.html">MethodFunctionBinary</a> -- a type of method function</span>          </li>
          <li>
<span><a title="a type of method function" href="___Method__Function__With__Options.html">MethodFunctionWithOptions</a> -- a type of method function</span>          </li>
        </ul>
      </div>
    </div>
  </body>

</html>
